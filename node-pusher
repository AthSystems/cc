-- Node Block Pusher
local modem = peripheral.find("modem") or error("No modem found", 0)
local gearshift = peripheral.wrap("bottom")
rednet.open(peripheral.getName(modem))

local nodeID = os.getComputerID()
local rs_5m_up = "left"
local rs_1m_up = "bottom"
local rs_15_down = "right"
local name = "pusherNode"

print("Node " .. name .. " ready")


function move_plate(length, speed)
  p.move(length, speed)
end

move_plate(15,-2)

while true do
  local senderID, msg = rednet.receive()
  print("Message received : " .. msg)
  local l = tonumber(msg)
  local s = 2

  if l < 0 then
    s = -2
  end

  move_plate(l,s)
  rsp = "Set at " .. tostring(l)
  rednet.send(senderID, rsp)
  print(rsp)

end
