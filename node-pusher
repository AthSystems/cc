-- Node Block Pusher


local name = "pusherNode"
local gear_side = "top"


local modem = peripheral.find("modem") or error("No modem found", 0)
local gearshift = peripheral.wrap("bottom")
rednet.open(peripheral.getName(modem))


print("Node " .. name .. " ready")


function move_plate(length, speed)
  gearshift.move(length, speed)
end

move_plate(15,-2)

while true do
  local senderID, msg = rednet.receive()
  print("Message received : " .. msg)
  local l = tonumber(msg)
  local s = 2

  if l < 0 then
    s = -2
  end

  move_plate(l,s)
  rsp = "Set at " .. tostring(l)
  rednet.send(senderID, rsp)
  print(rsp)

end
