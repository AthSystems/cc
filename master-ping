-- === Setup ===
local modem = peripheral.find("modem") or error("No modem found")
rednet.open(peripheral.getName(modem))

-- === Target Node IDs ===
local nodeDrills  = 0
local nodePusher  = 5
local nodeDeploy  = 20
local nodeMonitor = 24

-- === Ping Utility ===
function pingNode(nodeID, timeout)
    local startTime = os.clock()

    print("ðŸ“¡ Pinging node ID:", nodeID)
    rednet.send(nodeID, "ping", "farm-ping")

    while true do
        local timeLeft = timeout - (os.clock() - startTime)
        if timeLeft <= 0 then
            print("No response from node", nodeID)
            return false
        end

        local senderID, message, protocol = rednet.receive("farm-pong", timeLeft)
        if senderID == nodeID and message == "pong" then
            print("Pong received from node", nodeID)
            return true
        end
    end
end

-- === Ping Each Node ===
local nodes = { nodeDrills, nodePusher, nodeDeploy, nodeMonitor }

for _, nodeID in ipairs(nodes) do
    pingNode(nodeID, 5)
end
