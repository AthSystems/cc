-- === Setup ===
local modem = peripheral.find("modem") or error("No modem found")
local monitor = peripheral.find("monitor") or error("No monitor found")
rednet.open(peripheral.getName(modem))

monitor.setTextScale(0.5)
monitor.setBackgroundColor(colors.black)
monitor.setTextColor(colors.white)
monitor.clear()

local width, height = monitor.getSize()
local lines = {}

-- Adds a line and scrolls if needed
local function addLine(text)
    table.insert(lines, text)
    if #lines > height then
        table.remove(lines, 1)
    end

    monitor.clear()
    for i, line in ipairs(lines) do
        monitor.setCursorPos(1, i)
        monitor.write(line)
    end
end

-- === Main Loop ===
print("Monitor listener running...")
while true do
    local senderId, message = rednet.receive()
    if type(message) == "string" then
        addLine(os.date("%H:%M:%S") .. " | " .. message)
    end
end
